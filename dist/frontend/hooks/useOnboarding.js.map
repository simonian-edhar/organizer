{"version":3,"sources":["../../../src/frontend/hooks/useOnboarding.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { organizationService } from '../services/organization.service';\nimport { OnboardingProgress } from '../types/organization.types';\n\n/**\n * Use Onboarding Hook\n */\nexport const useOnboarding = () => {\n    const [progress, setProgress] = useState<OnboardingProgress | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    /**\n     * Load progress\n     */\n    const loadProgress = useCallback(async (): Promise<void> => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            const data = await organizationService.getOnboardingProgress();\n            setProgress(data);\n        } catch (error: any) {\n            setError(error.response?.data?.message || 'Не вдалося завантажити прогрес');\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    /**\n     * Complete step\n     */\n    const completeStep = useCallback(async (\n        step: string,\n        data?: Record<string, any>\n    ): Promise<void> => {\n        setIsLoading(true);\n        setError(null);\n\n        try {\n            await organizationService.updateOnboardingStep(step, true, data);\n            await loadProgress();\n        } catch (error: any) {\n            setError(error.response?.data?.message || 'Не вдалося оновити крок');\n            throw error;\n        } finally {\n            setIsLoading(false);\n        }\n    }, [loadProgress]);\n\n    /**\n     * Check if step is completed\n     */\n    const isStepCompleted = useCallback((step: string): boolean => {\n        return progress?.steps.some(s => s.step === step && s.completed) || false;\n    }, [progress]);\n\n    /**\n     * Load on first render\n     */\n    useEffect(() => {\n        loadProgress();\n    }, [loadProgress]);\n\n    return {\n        progress,\n        isLoading,\n        error,\n        loadProgress,\n        completeStep,\n        isStepCompleted,\n        isCompleted: progress?.completed || false,\n        percentage: progress?.percentage || 0,\n    };\n};\n"],"names":["useOnboarding","progress","setProgress","useState","isLoading","setIsLoading","error","setError","loadProgress","useCallback","data","organizationService","getOnboardingProgress","response","message","completeStep","step","updateOnboardingStep","isStepCompleted","steps","some","s","completed","useEffect","isCompleted","percentage"],"mappings":";;;;+BAOaA;;;eAAAA;;;uBAPoC;qCACb;AAM7B,MAAMA,gBAAgB;IACzB,MAAM,CAACC,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAA4B;IACpE,MAAM,CAACC,WAAWC,aAAa,GAAGF,IAAAA,eAAQ,EAAC;IAC3C,MAAM,CAACG,OAAOC,SAAS,GAAGJ,IAAAA,eAAQ,EAAgB;IAElD;;KAEC,GACD,MAAMK,eAAeC,IAAAA,kBAAW,EAAC;QAC7BJ,aAAa;QACbE,SAAS;QAET,IAAI;YACA,MAAMG,OAAO,MAAMC,wCAAmB,CAACC,qBAAqB;YAC5DV,YAAYQ;QAChB,EAAE,OAAOJ,OAAY;YACjBC,SAASD,MAAMO,QAAQ,EAAEH,MAAMI,WAAW;QAC9C,SAAU;YACNT,aAAa;QACjB;IACJ,GAAG,EAAE;IAEL;;KAEC,GACD,MAAMU,eAAeN,IAAAA,kBAAW,EAAC,OAC7BO,MACAN;QAEAL,aAAa;QACbE,SAAS;QAET,IAAI;YACA,MAAMI,wCAAmB,CAACM,oBAAoB,CAACD,MAAM,MAAMN;YAC3D,MAAMF;QACV,EAAE,OAAOF,OAAY;YACjBC,SAASD,MAAMO,QAAQ,EAAEH,MAAMI,WAAW;YAC1C,MAAMR;QACV,SAAU;YACND,aAAa;QACjB;IACJ,GAAG;QAACG;KAAa;IAEjB;;KAEC,GACD,MAAMU,kBAAkBT,IAAAA,kBAAW,EAAC,CAACO;QACjC,OAAOf,UAAUkB,MAAMC,KAAKC,CAAAA,IAAKA,EAAEL,IAAI,KAAKA,QAAQK,EAAEC,SAAS,KAAK;IACxE,GAAG;QAACrB;KAAS;IAEb;;KAEC,GACDsB,IAAAA,gBAAS,EAAC;QACNf;IACJ,GAAG;QAACA;KAAa;IAEjB,OAAO;QACHP;QACAG;QACAE;QACAE;QACAO;QACAG;QACAM,aAAavB,UAAUqB,aAAa;QACpCG,YAAYxB,UAAUwB,cAAc;IACxC;AACJ"}