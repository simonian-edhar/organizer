{"version":3,"sources":["../../../src/invoices/dto/invoice.dto.ts"],"sourcesContent":["import { IsEnum, IsString, IsOptional, IsNumber, IsDate, IsUUID, ValidateNested, ArrayMinSize, IsBoolean, IsArray, IsDateString, Min, Max } from 'class-validator';\nimport { Type } from 'class-transformer';\nimport { InvoiceStatus, PaymentMethod } from '../../database/entities/Invoice.entity';\n\n/**\n * Create Invoice DTO\n */\nexport class CreateInvoiceDto {\n    @IsUUID()\n    clientId: string;\n\n    @IsDate()\n    invoiceDate: string;\n\n    @IsOptional()\n    @IsDate()\n    dueDate?: string;\n\n    @IsOptional()\n    @IsString()\n    description?: string;\n\n    @IsOptional()\n    @IsEnum(['hourly', 'fixed', 'piecewise'])\n    unitType?: 'hourly' | 'fixed' | 'piecewise';\n\n    @IsOptional()\n    @IsNumber()\n    subtotal?: number;\n\n    @IsOptional()\n    @IsNumber()\n    discountPercentage?: number;\n\n    @IsOptional()\n    @IsNumber()\n    vatRate?: number;\n\n    @IsOptional()\n    @IsBoolean()\n    vatIncluded?: boolean;\n\n    @IsArray()\n    @ArrayMinSize(1)\n    @ValidateNested({ each: true })\n    @Type(() => CreateInvoiceItemDto)\n    items: CreateInvoiceItemDto[];\n\n    @IsOptional()\n    @IsString()\n    internalNotes?: string;\n\n    @IsOptional()\n    @IsString()\n    clientNotes?: string;\n}\n\n/**\n * Create Invoice Item DTO\n */\nexport class CreateInvoiceItemDto {\n    @IsString()\n    description: string;\n\n    @IsOptional()\n    @IsUUID()\n    pricelistItemId?: string;\n\n    @IsOptional()\n    @IsString()\n    code?: string;\n\n    @IsOptional()\n    @IsNumber()\n    quantity?: number;\n\n    @IsOptional()\n    @IsNumber()\n    duration?: number;\n\n    @IsOptional()\n    @IsNumber()\n    unitPrice?: number;\n}\n\n/**\n * Update Invoice DTO\n */\nexport class UpdateInvoiceDto {\n    @IsOptional()\n    @IsDate()\n    invoiceDate?: string;\n\n    @IsOptional()\n    @IsDate()\n    dueDate?: string;\n\n    @IsOptional()\n    @IsString()\n    description?: string;\n\n    @IsOptional()\n    @IsEnum(['draft', 'sent', 'viewed', 'paid', 'overdue', 'cancelled'])\n    status?: InvoiceStatus;\n\n    @IsOptional()\n    @IsString()\n    internalNotes?: string;\n}\n\n/**\n * Invoice Filters DTO\n */\nexport class InvoiceFiltersDto {\n    @IsOptional()\n    @IsUUID()\n    clientId?: string;\n\n    @IsOptional()\n    @IsEnum(['draft', 'sent', 'viewed', 'paid', 'overdue', 'cancelled'])\n    status?: InvoiceStatus;\n\n    @IsOptional()\n    @IsDateString()\n    invoiceDateFrom?: string;\n\n    @IsOptional()\n    @IsDateString()\n    invoiceDateTo?: string;\n\n    @IsOptional()\n    @IsString()\n    search?: string;\n\n    @IsOptional()\n    @IsString()\n    sortBy?: string;\n\n    @IsOptional()\n    @IsString()\n    sortOrder?: 'ASC' | 'DESC';\n\n    @IsOptional()\n    @Type(() => Number)\n    @Min(1)\n    @Max(100)\n    page?: number;\n\n    @IsOptional()\n    @Type(() => Number)\n    @Min(1)\n    @Max(100)\n    limit?: number;\n}\n\n/**\n * Generate Invoice PDF DTO\n */\nexport class GenerateInvoicePdfDto {\n    @IsUUID()\n    userId: string;\n\n    @IsOptional()\n    @IsBoolean()\n    sendEmail?: boolean;\n\n    @IsOptional()\n    @IsBoolean()\n    sendSms?: boolean;\n}\n\n/**\n * Record Payment DTO\n */\nexport class RecordPaymentDto {\n    @IsNumber()\n    amount: number;\n\n    @IsEnum(['cash', 'card', 'bank_transfer', 'wayforpay'])\n    method: PaymentMethod;\n\n    @IsOptional()\n    @IsString()\n    reference?: string;\n}\n"],"names":["CreateInvoiceDto","CreateInvoiceItemDto","GenerateInvoicePdfDto","InvoiceFiltersDto","RecordPaymentDto","UpdateInvoiceDto","each","Number"],"mappings":";;;;;;;;;;;QAOaA;eAAAA;;QAqDAC;eAAAA;;QAkGAC;eAAAA;;QA7CAC;eAAAA;;QA6DAC;eAAAA;;QAtFAC;eAAAA;;;gCAxFoI;kCAC5H;+BACwB;;;;;;;;;;AAKtC,IAAA,AAAML,mBAAN,MAAMA;AAgDb;;;;;;;;;;;;;;;;;;;;;;QAhCa;QAAU;QAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAqBVM,MAAM;;oCACZL;;;;;;;;;;;;;AAeT,IAAA,AAAMA,uBAAN,MAAMA;AAuBb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKO,IAAA,AAAMI,mBAAN,MAAMA;AAoBb;;;;;;;;;;;;;;;;;;;QANa;QAAS;QAAQ;QAAU;QAAQ;QAAW;;;;;;;;;AAWpD,IAAA,AAAMF,oBAAN,MAAMA;AAwCb;;;;;;;;;QAlCa;QAAS;QAAQ;QAAU;QAAQ;QAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oCAwB3CI;;;;;;;oCAMAA;;;;;AAST,IAAA,AAAML,wBAAN,MAAMA;AAWb;;;;;;;;;;;;;;;AAKO,IAAA,AAAME,mBAAN,MAAMA;AAUb;;;;;;;QANa;QAAQ;QAAQ;QAAiB"}