{"version":3,"sources":["../../../../src/enterprise/domains/controllers/custom-domain.controller.ts"],"sourcesContent":["import { Controller, Get, Post, Delete, Param, Body, UseGuards, Request } from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiBearerAuth } from '@nestjs/swagger';\nimport { CustomDomainService } from '../services/custom-domain.service';\nimport { JwtAuthGuard } from '../../../auth/guards';\nimport { AddDomainDto, VerifyDomainDto } from '../dto/custom-domain.dto';\n\n@ApiTags('Custom Domains')\n@ApiBearerAuth()\n@Controller('v1/domains')\n@UseGuards(JwtAuthGuard)\nexport class CustomDomainController {\n    constructor(private readonly customDomainService: CustomDomainService) {}\n\n    @Get()\n    @ApiOperation({ summary: 'Get all custom domains for organization' })\n    async getDomains(@Request() req: any) {\n        return this.customDomainService.getDomains(req.user.tenant_id);\n    }\n\n    @Post()\n    @ApiOperation({ summary: 'Add custom domain' })\n    async addDomain(@Request() req: any, @Body() dto: AddDomainDto) {\n        return this.customDomainService.addDomain(req.user.tenant_id, dto.domain);\n    }\n\n    @Post(':id/verify')\n    @ApiOperation({ summary: 'Verify domain ownership' })\n    async verifyDomain(@Request() req: any, @Param('id') id: string) {\n        return this.customDomainService.verifyDomain(req.user.tenant_id, id);\n    }\n\n    @Post(':id/primary')\n    @ApiOperation({ summary: 'Set domain as primary' })\n    async setPrimaryDomain(@Request() req: any, @Param('id') id: string) {\n        return this.customDomainService.setPrimaryDomain(req.user.tenant_id, id);\n    }\n\n    @Post(':id/ssl')\n    @ApiOperation({ summary: 'Generate SSL certificate' })\n    async generateSsl(@Request() req: any, @Param('id') id: string) {\n        return this.customDomainService.generateSslCertificate(req.user.tenant_id, id);\n    }\n\n    @Delete(':id')\n    @ApiOperation({ summary: 'Remove custom domain' })\n    async removeDomain(@Request() req: any, @Param('id') id: string) {\n        await this.customDomainService.removeDomain(req.user.tenant_id, id);\n        return { success: true };\n    }\n}\n"],"names":["CustomDomainController","getDomains","req","customDomainService","user","tenant_id","addDomain","dto","domain","verifyDomain","id","setPrimaryDomain","generateSsl","generateSslCertificate","removeDomain","success","summary"],"mappings":";;;;+BAUaA;;;eAAAA;;;wBAVkE;yBAC1B;qCACjB;wBACP;iCACiB;;;;;;;;;;;;;;;AAMvC,IAAA,AAAMA,yBAAN,MAAMA;IAGT,MAEMC,WAAW,AAAWC,GAAQ,EAAE;QAClC,OAAO,IAAI,CAACC,mBAAmB,CAACF,UAAU,CAACC,IAAIE,IAAI,CAACC,SAAS;IACjE;IAEA,MAEMC,UAAU,AAAWJ,GAAQ,EAAE,AAAQK,GAAiB,EAAE;QAC5D,OAAO,IAAI,CAACJ,mBAAmB,CAACG,SAAS,CAACJ,IAAIE,IAAI,CAACC,SAAS,EAAEE,IAAIC,MAAM;IAC5E;IAEA,MAEMC,aAAa,AAAWP,GAAQ,EAAE,AAAaQ,EAAU,EAAE;QAC7D,OAAO,IAAI,CAACP,mBAAmB,CAACM,YAAY,CAACP,IAAIE,IAAI,CAACC,SAAS,EAAEK;IACrE;IAEA,MAEMC,iBAAiB,AAAWT,GAAQ,EAAE,AAAaQ,EAAU,EAAE;QACjE,OAAO,IAAI,CAACP,mBAAmB,CAACQ,gBAAgB,CAACT,IAAIE,IAAI,CAACC,SAAS,EAAEK;IACzE;IAEA,MAEME,YAAY,AAAWV,GAAQ,EAAE,AAAaQ,EAAU,EAAE;QAC5D,OAAO,IAAI,CAACP,mBAAmB,CAACU,sBAAsB,CAACX,IAAIE,IAAI,CAACC,SAAS,EAAEK;IAC/E;IAEA,MAEMI,aAAa,AAAWZ,GAAQ,EAAE,AAAaQ,EAAU,EAAE;QAC7D,MAAM,IAAI,CAACP,mBAAmB,CAACW,YAAY,CAACZ,IAAIE,IAAI,CAACC,SAAS,EAAEK;QAChE,OAAO;YAAEK,SAAS;QAAK;IAC3B;IArCA,YAAY,AAAiBZ,mBAAwC,CAAE;aAA1CA,sBAAAA;IAA2C;AAsC5E;;;;QAnCoBa,SAAS;;;;;;;;;;;;QAMTA,SAAS;;;;;;;;;;;;;;QAMTA,SAAS;;;;;;;;;;;;;;QAMTA,SAAS;;;;;;;;;;;;;;QAMTA,SAAS;;;;;;;;;;;;;;QAMTA,SAAS"}