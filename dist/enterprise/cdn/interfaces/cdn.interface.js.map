{"version":3,"sources":["../../../../src/enterprise/cdn/interfaces/cdn.interface.ts"],"sourcesContent":["/**\n * CDN Configuration\n */\n\nexport interface CdnConfig {\n    enabled: boolean;\n    provider: 'cloudflare' | 'aws_cloudfront' | 'fastly' | 'custom';\n    domain: string;\n    baseUrl: string;\n    cacheTtl: number;\n    staticCacheTtl: number;\n    apiCacheTtl: number;\n}\n\nexport interface CdnPurgeOptions {\n    urls?: string[];\n    tags?: string[];\n    all?: boolean;\n}\n\nexport interface CdnCacheRule {\n    pathPattern: string;\n    ttl: number;\n    cacheKeyPattern?: string;\n    headers?: string[];\n    queryStringBehavior: 'include-all' | 'exclude-all' | 'include-list' | 'exclude-list';\n    queryStringList?: string[];\n}\n\nexport const DEFAULT_CDN_CONFIG: CdnConfig = {\n    enabled: true,\n    provider: 'cloudflare',\n    domain: '',\n    baseUrl: '',\n    cacheTtl: 3600,\n    staticCacheTtl: 86400 * 30, // 30 days\n    apiCacheTtl: 60, // 1 minute\n};\n\nexport const CDN_CACHE_RULES: CdnCacheRule[] = [\n    {\n        pathPattern: '/static/*',\n        ttl: 86400 * 365, // 1 year\n        queryStringBehavior: 'exclude-all',\n    },\n    {\n        pathPattern: '/assets/*',\n        ttl: 86400 * 30, // 30 days\n        queryStringBehavior: 'exclude-all',\n    },\n    {\n        pathPattern: '/api/v1/clients',\n        ttl: 300, // 5 minutes\n        queryStringBehavior: 'include-list',\n        queryStringList: ['page', 'limit', 'search'],\n    },\n    {\n        pathPattern: '/api/v1/documents/*',\n        ttl: 3600, // 1 hour\n        queryStringBehavior: 'exclude-all',\n    },\n];\n\n// Cache tags for granular invalidation\nexport const CDN_CACHE_TAGS = {\n    TENANT: (tenantId: string) => `tenant:${tenantId}`,\n    CLIENTS: (tenantId: string) => `clients:${tenantId}`,\n    CASES: (tenantId: string) => `cases:${tenantId}`,\n    DOCUMENTS: (tenantId: string) => `documents:${tenantId}`,\n    USER: (userId: string) => `user:${userId}`,\n    STATIC: 'static',\n    API: 'api',\n};\n"],"names":["CDN_CACHE_RULES","CDN_CACHE_TAGS","DEFAULT_CDN_CONFIG","enabled","provider","domain","baseUrl","cacheTtl","staticCacheTtl","apiCacheTtl","pathPattern","ttl","queryStringBehavior","queryStringList","TENANT","tenantId","CLIENTS","CASES","DOCUMENTS","USER","userId","STATIC","API"],"mappings":"AAAA;;CAEC;;;;;;;;;;;QAqCYA;eAAAA;;QAyBAC;eAAAA;;QAnCAC;eAAAA;;;AAAN,MAAMA,qBAAgC;IACzCC,SAAS;IACTC,UAAU;IACVC,QAAQ;IACRC,SAAS;IACTC,UAAU;IACVC,gBAAgB,QAAQ;IACxBC,aAAa;AACjB;AAEO,MAAMT,kBAAkC;IAC3C;QACIU,aAAa;QACbC,KAAK,QAAQ;QACbC,qBAAqB;IACzB;IACA;QACIF,aAAa;QACbC,KAAK,QAAQ;QACbC,qBAAqB;IACzB;IACA;QACIF,aAAa;QACbC,KAAK;QACLC,qBAAqB;QACrBC,iBAAiB;YAAC;YAAQ;YAAS;SAAS;IAChD;IACA;QACIH,aAAa;QACbC,KAAK;QACLC,qBAAqB;IACzB;CACH;AAGM,MAAMX,iBAAiB;IAC1Ba,QAAQ,CAACC,WAAqB,CAAC,OAAO,EAAEA,UAAU;IAClDC,SAAS,CAACD,WAAqB,CAAC,QAAQ,EAAEA,UAAU;IACpDE,OAAO,CAACF,WAAqB,CAAC,MAAM,EAAEA,UAAU;IAChDG,WAAW,CAACH,WAAqB,CAAC,UAAU,EAAEA,UAAU;IACxDI,MAAM,CAACC,SAAmB,CAAC,KAAK,EAAEA,QAAQ;IAC1CC,QAAQ;IACRC,KAAK;AACT"}