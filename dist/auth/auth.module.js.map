{"version":3,"sources":["../../src/auth/auth.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { JwtModule } from '@nestjs/jwt';\nimport { PassportModule } from '@nestjs/passport';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\n\n// Entities\nimport { User } from '../database/entities/User.entity';\nimport { Organization } from '../database/entities/Organization.entity';\nimport { RefreshToken } from '../database/entities/RefreshToken.entity';\nimport { Subscription } from '../database/entities/Subscription.entity';\nimport { AuditLog } from '../database/entities/AuditLog.entity';\nimport { OnboardingProgress } from '../database/entities/OnboardingProgress.entity';\n\n// Services\nimport { AuthService } from './services/auth.service';\nimport { JwtService } from './services/jwt.service';\nimport { OrganizationService } from './services/organization.service';\nimport { AuditService } from './services/audit.service';\n\n// Controllers\nimport { AuthController } from './controllers/auth.controller';\nimport { OrganizationController } from './controllers/organization.controller';\n\n// Strategies\nimport { JwtStrategy } from './strategies/jwt.strategy';\nimport { RefreshStrategy } from './strategies/refresh.strategy';\n\n// Guards\nimport { JwtAuthGuard } from './guards';\nimport { TenantGuard, RbacGuard, SubscriptionGuard } from './guards';\n\n/**\n * Auth Module\n */\n@Module({\n    imports: [\n        TypeOrmModule.forFeature([\n            User,\n            Organization,\n            RefreshToken,\n            Subscription,\n            AuditLog,\n            OnboardingProgress,\n        ]),\n        PassportModule,\n        JwtModule.registerAsync({\n            imports: [ConfigModule],\n            useFactory: async (configService: ConfigService) => ({\n                secret: configService.get<string>('JWT_SECRET') || 'your-secret-key',\n                signOptions: {\n                    expiresIn: configService.get<string>('JWT_ACCESS_TOKEN_EXPIRY', '15m'),\n                },\n            }),\n            inject: [ConfigService],\n        }),\n    ],\n    controllers: [AuthController, OrganizationController],\n    providers: [\n        AuthService,\n        JwtService,\n        OrganizationService,\n        AuditService,\n        JwtStrategy,\n        RefreshStrategy,\n        JwtAuthGuard,\n        TenantGuard,\n        RbacGuard,\n        SubscriptionGuard,\n    ],\n    exports: [\n        AuthService,\n        JwtService,\n        OrganizationService,\n        AuditService,\n        JwtAuthGuard,\n        TenantGuard,\n        RbacGuard,\n        SubscriptionGuard,\n    ],\n})\nexport class AuthModule {}\n"],"names":["AuthModule","imports","TypeOrmModule","forFeature","User","Organization","RefreshToken","Subscription","AuditLog","OnboardingProgress","PassportModule","JwtModule","registerAsync","ConfigModule","useFactory","configService","secret","get","signOptions","expiresIn","inject","ConfigService","controllers","AuthController","OrganizationController","providers","AuthService","JwtService","OrganizationService","AuditService","JwtStrategy","RefreshStrategy","JwtAuthGuard","TenantGuard","RbacGuard","SubscriptionGuard","exports"],"mappings":";;;;+BAiFaA;;;eAAAA;;;wBAjFU;qBACG;0BACK;yBACD;wBACc;4BAGvB;oCACQ;oCACA;oCACA;gCACJ;0CACU;6BAGP;4BACD;qCACS;8BACP;gCAGE;wCACQ;6BAGX;iCACI;wBAGH;;;;;;;AAoDtB,IAAA,AAAMA,aAAN,MAAMA;AAAY;;;QA7CrBC,SAAS;YACLC,sBAAa,CAACC,UAAU,CAAC;gBACrBC,gBAAI;gBACJC,gCAAY;gBACZC,gCAAY;gBACZC,gCAAY;gBACZC,wBAAQ;gBACRC,4CAAkB;aACrB;YACDC,wBAAc;YACdC,cAAS,CAACC,aAAa,CAAC;gBACpBX,SAAS;oBAACY,oBAAY;iBAAC;gBACvBC,YAAY,OAAOC,gBAAkC,CAAA;wBACjDC,QAAQD,cAAcE,GAAG,CAAS,iBAAiB;wBACnDC,aAAa;4BACTC,WAAWJ,cAAcE,GAAG,CAAS,2BAA2B;wBACpE;oBACJ,CAAA;gBACAG,QAAQ;oBAACC,qBAAa;iBAAC;YAC3B;SACH;QACDC,aAAa;YAACC,8BAAc;YAAEC,8CAAsB;SAAC;QACrDC,WAAW;YACPC,wBAAW;YACXC,sBAAU;YACVC,wCAAmB;YACnBC,0BAAY;YACZC,wBAAW;YACXC,gCAAe;YACfC,oBAAY;YACZC,mBAAW;YACXC,iBAAS;YACTC,yBAAiB;SACpB;QACDC,SAAS;YACLV,wBAAW;YACXC,sBAAU;YACVC,wCAAmB;YACnBC,0BAAY;YACZG,oBAAY;YACZC,mBAAW;YACXC,iBAAS;YACTC,yBAAiB;SACpB"}