{"version":3,"sources":["../src/app.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { ScheduleModule } from '@nestjs/schedule';\nimport { ThrottlerModule } from '@nestjs/throttler';\nimport { LoggingModule } from './common/logging';\nimport { AuthModule } from './auth';\nimport { BillingModule } from './billing';\nimport { CasesModule } from './cases';\nimport { ClientsModule } from './clients';\nimport { DocumentsModule } from './documents';\nimport { EventsModule } from './events';\nimport { PricelistsModule } from './pricelists';\nimport { InvoicesModule } from './invoices';\nimport { CalculationsModule } from './calculations';\nimport { DashboardModule } from './dashboard';\nimport { FileStorageModule } from './file-storage';\nimport { NotificationsModule } from './notifications';\nimport { EnterpriseModule } from './enterprise/enterprise.module';\nimport { HealthController } from './common/health';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      isGlobal: true,\n      envFilePath: ['.env.local', '.env'],\n    }),\n    ThrottlerModule.forRoot([{ ttl: 60000, limit: 100 }]),\n    ScheduleModule.forRoot(),\n    TypeOrmModule.forRootAsync({\n      imports: [ConfigModule],\n      useFactory: (configService: ConfigService) => {\n        const nodeEnv = configService.get<string>('NODE_ENV', 'development');\n        const dbType = configService.get<string>('DB_TYPE', 'sqlite');\n        const entityPattern = `${__dirname}/**/*.entity.js`;\n        if (dbType === 'sqlite' || nodeEnv === 'development') {\n          return {\n            type: 'better-sqlite3',\n            database: configService.get<string>('DB_NAME', 'law_organizer.db'),\n            entities: [entityPattern],\n            synchronize: configService.get<string>('DB_SYNC', 'true') !== 'false',\n            logging: false,\n          };\n        }\n        return {\n          type: 'postgres',\n          host: configService.get<string>('DATABASE_HOST') || configService.get<string>('DB_HOST', 'localhost'),\n          port: configService.get<number>('DATABASE_PORT') ?? configService.get<number>('DB_PORT', 5432),\n          username: configService.get<string>('DATABASE_USER') || configService.get<string>('DB_USER'),\n          password: configService.get<string>('DATABASE_PASSWORD') ?? configService.get<string>('DB_PASSWORD', ''),\n          database: configService.get<string>('DATABASE_NAME') || configService.get<string>('DB_NAME', 'law_organizer'),\n          entities: [entityPattern],\n          synchronize: nodeEnv !== 'production',\n          logging: nodeEnv === 'development',\n        };\n      },\n      inject: [ConfigService],\n    }),\n    LoggingModule.register({\n      enableRequestLogging: true,\n      enableMethodLogging: true,\n      enablePerformanceLogging: true,\n      performanceThreshold: 1000,\n    }),\n    EnterpriseModule,\n    AuthModule,\n    BillingModule,\n    CasesModule,\n    ClientsModule,\n    DocumentsModule,\n    EventsModule,\n    PricelistsModule,\n    InvoicesModule,\n    CalculationsModule,\n    DashboardModule,\n    FileStorageModule,\n    NotificationsModule,\n  ],\n  controllers: [HealthController],\n  providers: [],\n})\nexport class AppModule {}\n"],"names":["AppModule","imports","ConfigModule","forRoot","isGlobal","envFilePath","ThrottlerModule","ttl","limit","ScheduleModule","TypeOrmModule","forRootAsync","useFactory","configService","nodeEnv","get","dbType","entityPattern","__dirname","type","database","entities","synchronize","logging","host","port","username","password","inject","ConfigService","LoggingModule","register","enableRequestLogging","enableMethodLogging","enablePerformanceLogging","performanceThreshold","EnterpriseModule","AuthModule","BillingModule","CasesModule","ClientsModule","DocumentsModule","EventsModule","PricelistsModule","InvoicesModule","CalculationsModule","DashboardModule","FileStorageModule","NotificationsModule","controllers","HealthController","providers"],"mappings":";;;;+BAiFaA;;;eAAAA;;;wBAjFU;wBACqB;yBACd;0BACC;2BACC;yBACF;sBACH;yBACG;uBACF;yBACE;2BACE;wBACH;4BACI;0BACF;8BACI;2BACH;6BACE;+BACE;kCACH;wBACA;;;;;;;AA8D1B,IAAA,AAAMA,YAAN,MAAMA;AAAW;;;QA3DtBC,SAAS;YACPC,oBAAY,CAACC,OAAO,CAAC;gBACnBC,UAAU;gBACVC,aAAa;oBAAC;oBAAc;iBAAO;YACrC;YACAC,0BAAe,CAACH,OAAO,CAAC;gBAAC;oBAAEI,KAAK;oBAAOC,OAAO;gBAAI;aAAE;YACpDC,wBAAc,CAACN,OAAO;YACtBO,sBAAa,CAACC,YAAY,CAAC;gBACzBV,SAAS;oBAACC,oBAAY;iBAAC;gBACvBU,YAAY,CAACC;oBACX,MAAMC,UAAUD,cAAcE,GAAG,CAAS,YAAY;oBACtD,MAAMC,SAASH,cAAcE,GAAG,CAAS,WAAW;oBACpD,MAAME,gBAAgB,GAAGC,UAAU,eAAe,CAAC;oBACnD,IAAIF,WAAW,YAAYF,YAAY,eAAe;wBACpD,OAAO;4BACLK,MAAM;4BACNC,UAAUP,cAAcE,GAAG,CAAS,WAAW;4BAC/CM,UAAU;gCAACJ;6BAAc;4BACzBK,aAAaT,cAAcE,GAAG,CAAS,WAAW,YAAY;4BAC9DQ,SAAS;wBACX;oBACF;oBACA,OAAO;wBACLJ,MAAM;wBACNK,MAAMX,cAAcE,GAAG,CAAS,oBAAoBF,cAAcE,GAAG,CAAS,WAAW;wBACzFU,MAAMZ,cAAcE,GAAG,CAAS,oBAAoBF,cAAcE,GAAG,CAAS,WAAW;wBACzFW,UAAUb,cAAcE,GAAG,CAAS,oBAAoBF,cAAcE,GAAG,CAAS;wBAClFY,UAAUd,cAAcE,GAAG,CAAS,wBAAwBF,cAAcE,GAAG,CAAS,eAAe;wBACrGK,UAAUP,cAAcE,GAAG,CAAS,oBAAoBF,cAAcE,GAAG,CAAS,WAAW;wBAC7FM,UAAU;4BAACJ;yBAAc;wBACzBK,aAAaR,YAAY;wBACzBS,SAAST,YAAY;oBACvB;gBACF;gBACAc,QAAQ;oBAACC,qBAAa;iBAAC;YACzB;YACAC,sBAAa,CAACC,QAAQ,CAAC;gBACrBC,sBAAsB;gBACtBC,qBAAqB;gBACrBC,0BAA0B;gBAC1BC,sBAAsB;YACxB;YACAC,kCAAgB;YAChBC,gBAAU;YACVC,sBAAa;YACbC,kBAAW;YACXC,sBAAa;YACbC,0BAAe;YACfC,oBAAY;YACZC,4BAAgB;YAChBC,wBAAc;YACdC,gCAAkB;YAClBC,0BAAe;YACfC,8BAAiB;YACjBC,kCAAmB;SACpB;QACDC,aAAa;YAACC,wBAAgB;SAAC;QAC/BC,WAAW,EAAE"}