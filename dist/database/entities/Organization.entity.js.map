{"version":3,"sources":["../../../src/database/entities/Organization.entity.ts"],"sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, DeleteDateColumn, OneToMany, ManyToOne, JoinColumn, Index } from 'typeorm';\nimport { SubscriptionPlan, SubscriptionStatus, SubscriptionProvider } from './enums/subscription.enum';\nimport { User } from './User.entity';\nimport { Subscription } from './Subscription.entity';\n\n@Entity('organizations')\n@Index('idx_organizations_name', ['name'])\nexport class Organization {\n    @PrimaryGeneratedColumn('uuid')\n    id: string;\n\n    @Column({ type: 'varchar', length: 255 })\n    name: string;\n\n    @Column({\n        type: 'varchar',\n        default: 'sole_proprietor'\n    })\n    legalForm: 'sole_proprietor' | 'llc' | 'joint_stock' | 'partnership' | 'other';\n\n    @Column({ type: 'varchar', length: 10, nullable: true })\n    edrpou: string;\n\n    @Column({ type: 'varchar', length: 12, nullable: true })\n    taxNumber: string;\n\n    @Column({ type: 'text', nullable: true })\n    address: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    city: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    region: string;\n\n    @Column({ type: 'varchar', length: 2, default: 'UA' })\n    country: string;\n\n    @Column({ type: 'varchar', length: 20, nullable: true })\n    phone: string;\n\n    @Column({ type: 'varchar', length: 255 })\n    email: string;\n\n    @Column({ type: 'varchar', length: 255, nullable: true })\n    website: string;\n\n    // Subscription fields\n    @Column({\n        type: 'varchar',\n        default: SubscriptionPlan.BASIC\n    })\n    subscriptionPlan: SubscriptionPlan;\n\n    @Column({\n        type: 'varchar',\n        default: SubscriptionStatus.TRIALING\n    })\n    subscriptionStatus: SubscriptionStatus;\n\n    @Column({ type: 'datetime', nullable: true })\n    trialEndAt: Date;\n\n    @Column({ type: 'datetime', nullable: true })\n    currentPeriodEndAt: Date;\n\n    @Column({ type: 'int', default: 1 })\n    maxUsers: number;\n\n    // Configuration\n    @Column({ type: 'varchar', length: 255, nullable: true })\n    customDomain: string;\n\n    @Column({ type: 'boolean', default: false })\n    mfaRequired: boolean;\n\n    @Column({ type: 'boolean', default: false })\n    ssoEnabled: boolean;\n\n    @Column({ type: 'int', default: 90 })\n    auditRetentionDays: number;\n\n    // Status\n    @Column({\n        type: 'varchar',\n        default: 'provisioning'\n    })\n    status: 'provisioning' | 'active' | 'suspended' | 'deleted';\n\n    // Metadata\n    @Column({ type: 'json' })\n    settings: Record<string, any>;\n\n    @Column({ type: 'json' })\n    metadata: Record<string, any>;\n\n    // Timestamps\n    @CreateDateColumn({ type: 'datetime' })\n    createdAt: Date;\n\n    @UpdateDateColumn({ type: 'datetime' })\n    updatedAt: Date;\n\n    @DeleteDateColumn({ type: 'datetime' })\n    deletedAt: Date;\n\n    // Relations\n    @OneToMany(() => User, user => user.organization)\n    users: User[];\n\n    @OneToMany(() => Subscription, subscription => subscription.organization)\n    subscriptions: Subscription[];\n\n    @OneToMany(() => require('./AuditLog.entity').AuditLog, auditLog => auditLog.organization)\n    auditLogs: any[];\n}\n"],"names":["Organization","type","length","default","nullable","SubscriptionPlan","BASIC","SubscriptionStatus","TRIALING","User","user","organization","Subscription","subscription","require","AuditLog","auditLog"],"mappings":";;;;+BAOaA;;;eAAAA;;;yBAPyI;kCAC3E;4BACtD;oCACQ;;;;;;;;;;AAItB,IAAA,AAAMA,eAAN,MAAMA;AA4Gb;;;;;;;QAxGcC,MAAM;QAAWC,QAAQ;;;;;;QAI/BD,MAAM;QACNE,SAAS;;;;;;QAIHF,MAAM;QAAWC,QAAQ;QAAIE,UAAU;;;;;;QAGvCH,MAAM;QAAWC,QAAQ;QAAIE,UAAU;;;;;;QAGvCH,MAAM;QAAQG,UAAU;;;;;;QAGxBH,MAAM;QAAWC,QAAQ;QAAKE,UAAU;;;;;;QAGxCH,MAAM;QAAWC,QAAQ;QAAKE,UAAU;;;;;;QAGxCH,MAAM;QAAWC,QAAQ;QAAGC,SAAS;;;;;;QAGrCF,MAAM;QAAWC,QAAQ;QAAIE,UAAU;;;;;;QAGvCH,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAWC,QAAQ;QAAKE,UAAU;;;;;;QAK9CH,MAAM;QACNE,SAASE,kCAAgB,CAACC,KAAK;;;;;;QAK/BL,MAAM;QACNE,SAASI,oCAAkB,CAACC,QAAQ;;;;;;QAI9BP,MAAM;QAAYG,UAAU;;;;;;QAG5BH,MAAM;QAAYG,UAAU;;;;;;QAG5BH,MAAM;QAAOE,SAAS;;;;;;QAItBF,MAAM;QAAWC,QAAQ;QAAKE,UAAU;;;;;;QAGxCH,MAAM;QAAWE,SAAS;;;;;;QAG1BF,MAAM;QAAWE,SAAS;;;;;;QAG1BF,MAAM;QAAOE,SAAS;;;;;;QAK5BF,MAAM;QACNE,SAAS;;;;;;QAKHF,MAAM;;;;;;QAGNA,MAAM;;;;;;QAIIA,MAAM;;;;;;QAGNA,MAAM;;;;;;QAGNA,MAAM;;;;;gCAITQ,gBAAI,GAAEC,OAAQA,KAAKC,YAAY;;;;gCAG/BC,gCAAY,GAAEC,eAAgBA,aAAaF,YAAY;;;;gCAGvDG,QAAQ,qBAAqBC,QAAQ,GAAEC,WAAYA,SAASL,YAAY;;;;;;QA3G3D"}