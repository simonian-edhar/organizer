{"version":3,"sources":["../../../src/database/entities/User.entity.ts"],"sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, DeleteDateColumn, ManyToOne, JoinColumn, Index } from 'typeorm';\nimport { UserRole, UserStatus } from './enums/subscription.enum';\nimport { Organization } from './Organization.entity';\n\n@Entity('users')\n@Index('idx_users_tenant_id', ['tenantId'])\n@Index('idx_users_email', ['email'])\n@Index('idx_users_role', ['role'])\n@Index('idx_users_status', ['status'])\nexport class User {\n    @PrimaryGeneratedColumn('uuid')\n    id: string;\n\n    @Column({ name: 'tenant_id', type: 'uuid' })\n    tenantId: string;\n\n    // Profile\n    @Column({ type: 'varchar', length: 100 })\n    firstName: string;\n\n    @Column({ type: 'varchar', length: 100 })\n    lastName: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    patronymic: string;\n\n    @Column({ type: 'varchar', length: 255 })\n    email: string;\n\n    @Column({ type: 'varchar', length: 20, nullable: true })\n    phone: string;\n\n    // Auth\n    @Column({ name: 'password_hash', type: 'varchar', length: 255 })\n    passwordHash: string;\n\n    @Column({ type: 'varchar', length: 255 })\n    salt: string;\n\n    @Column({ name: 'mfa_secret', type: 'varchar', length: 255, nullable: true })\n    mfaSecret: string;\n\n    @Column({ name: 'mfa_enabled', type: 'boolean', default: false })\n    mfaEnabled: boolean;\n\n    @Column({ name: 'mfa_backup_codes', type: 'json', nullable: true })\n    mfaBackupCodes: string[];\n\n    // Role & Permissions\n    @Column({\n        type: 'varchar',\n    })\n    role: UserRole;\n\n    @Column({\n        type: 'varchar',\n        default: UserStatus.PENDING\n    })\n    status: UserStatus;\n\n    // Additional info\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    position: string;\n\n    @Column({ name: 'avatar_url', type: 'text', nullable: true })\n    avatarUrl: string;\n\n    @Column({ name: 'bar_number', type: 'varchar', length: 20, nullable: true })\n    barNumber: string;\n\n    @Column({ type: 'json', nullable: true })\n    specialties: string[];\n\n    @Column({ type: 'json', nullable: true })\n    languages: string[];\n\n    // Email verification\n    @Column({ name: 'email_verified', type: 'boolean', default: false })\n    emailVerified: boolean;\n\n    @Column({ name: 'email_verified_at', type: 'datetime', nullable: true })\n    emailVerifiedAt: Date;\n\n    @Column({ name: 'email_verification_token', type: 'varchar', length: 255, nullable: true })\n    emailVerificationToken: string;\n\n    // Password reset\n    @Column({ name: 'password_reset_token', type: 'varchar', length: 255, nullable: true })\n    passwordResetToken: string;\n\n    @Column({ name: 'password_reset_expires_at', type: 'datetime', nullable: true })\n    passwordResetExpiresAt: Date;\n\n    @Column({ name: 'last_password_change_at', type: 'datetime', nullable: true })\n    lastPasswordChangeAt: Date;\n\n    // Login tracking\n    @Column({ name: 'last_login_at', type: 'datetime', nullable: true })\n    lastLoginAt: Date;\n\n    @Column({ name: 'last_login_ip', type: 'varchar', length: 45, nullable: true })\n    lastLoginIp: string;\n\n    @Column({ name: 'failed_login_attempts', type: 'int', default: 0 })\n    failedLoginAttempts: number;\n\n    @Column({ name: 'locked_until', type: 'datetime', nullable: true })\n    lockedUntil: Date;\n\n    // Metadata\n    @Column({ type: 'json', nullable: true })\n    preferences: Record<string, any>;\n\n    @Column({ type: 'json', nullable: true })\n    metadata: Record<string, any>;\n\n    // Timestamps\n    @CreateDateColumn({ name: 'created_at', type: 'datetime' })\n    createdAt: Date;\n\n    @UpdateDateColumn({ name: 'updated_at', type: 'datetime' })\n    updatedAt: Date;\n\n    @DeleteDateColumn({ name: 'deleted_at', type: 'datetime' })\n    deletedAt: Date;\n\n    @Column({ name: 'created_by', type: 'uuid', nullable: true })\n    createdBy: string;\n\n    @Column({ name: 'updated_by', type: 'uuid', nullable: true })\n    updatedBy: string;\n\n    // Relations\n    @ManyToOne(() => Organization)\n    @JoinColumn({ name: 'tenant_id' })\n    organization: Organization;\n}\n"],"names":["User","name","type","length","nullable","default","UserStatus","PENDING","Organization"],"mappings":";;;;+BASaA;;;eAAAA;;;yBAT8H;kCACtG;oCACR;;;;;;;;;;AAOtB,IAAA,AAAMA,OAAN,MAAMA;AA+Hb;;;;;;;QA3HcC,MAAM;QAAaC,MAAM;;;;;;QAIzBA,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCF,MAAM;QAAWC,QAAQ;;;;;;QAGzBD,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAIvCH,MAAM;QAAiBC,MAAM;QAAWC,QAAQ;;;;;;QAGhDD,MAAM;QAAWC,QAAQ;;;;;;QAGzBF,MAAM;QAAcC,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAG5DH,MAAM;QAAeC,MAAM;QAAWG,SAAS;;;;;;QAG/CJ,MAAM;QAAoBC,MAAM;QAAQE,UAAU;;;;;;QAKxDF,MAAM;;;;;;QAKNA,MAAM;QACNG,SAASC,4BAAU,CAACC,OAAO;;;;;;QAKrBL,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCH,MAAM;QAAcC,MAAM;QAAQE,UAAU;;;;;;QAG5CH,MAAM;QAAcC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAG3DF,MAAM;QAAQE,UAAU;;;;;;QAGxBF,MAAM;QAAQE,UAAU;;;;;;QAIxBH,MAAM;QAAkBC,MAAM;QAAWG,SAAS;;;;;;QAGlDJ,MAAM;QAAqBC,MAAM;QAAYE,UAAU;;;;;;QAGvDH,MAAM;QAA4BC,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAI1EH,MAAM;QAAwBC,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGtEH,MAAM;QAA6BC,MAAM;QAAYE,UAAU;;;;;;QAG/DH,MAAM;QAA2BC,MAAM;QAAYE,UAAU;;;;;;QAI7DH,MAAM;QAAiBC,MAAM;QAAYE,UAAU;;;;;;QAGnDH,MAAM;QAAiBC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAG9DH,MAAM;QAAyBC,MAAM;QAAOG,SAAS;;;;;;QAGrDJ,MAAM;QAAgBC,MAAM;QAAYE,UAAU;;;;;;QAIlDF,MAAM;QAAQE,UAAU;;;;;;QAGxBF,MAAM;QAAQE,UAAU;;;;;;QAIdH,MAAM;QAAcC,MAAM;;;;;;QAG1BD,MAAM;QAAcC,MAAM;;;;;;QAG1BD,MAAM;QAAcC,MAAM;;;;;;QAGpCD,MAAM;QAAcC,MAAM;QAAQE,UAAU;;;;;;QAG5CH,MAAM;QAAcC,MAAM;QAAQE,UAAU;;;;;gCAIrCI,gCAAY;;QACfP,MAAM;;;;;;;QAjIO;;;QACJ;;;QACD;;;QACE"}