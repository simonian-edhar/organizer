{"version":3,"sources":["../../../src/database/entities/Client.entity.ts"],"sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, DeleteDateColumn, OneToMany, ManyToOne, JoinColumn, Index } from 'typeorm';\nimport { UserRole } from './enums/subscription.enum';\nimport { Case } from './Case.entity';\nimport { User } from './User.entity';\n\n/**\n * Client Types\n */\nexport type ClientType = 'individual' | 'legal_entity';\n\nexport type ClientStatus = 'active' | 'inactive' | 'blocked';\n\n/**\n * Client Entity\n * Represents individual or legal entity clients\n */\n@Entity('clients')\n@Index('idx_clients_tenant_id', ['tenantId'])\n@Index('idx_clients_status', ['status'])\n@Index('idx_clients_type', ['type'])\n@Index('idx_clients_name', ['firstName', 'lastName'])\nexport class Client {\n    @PrimaryGeneratedColumn('uuid')\n    id: string;\n\n    @Column({ name: 'tenant_id', type: 'uuid' })\n    tenantId: string;\n\n    // Client Type\n    @Column({\n        type: 'varchar',\n    })\n    type: ClientType;\n\n    // Personal Information\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    firstName: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    lastName: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    patronymic: string;\n\n    // Legal Entity Information (if type === 'legal_entity')\n    @Column({ name: 'company_name', type: 'varchar', length: 255, nullable: true })\n    companyName: string;\n\n    @Column({ name: 'edrpou', type: 'varchar', length: 10, nullable: true })\n    edrpou: string;\n\n    @Column({ name: 'inn', type: 'varchar', length: 12, nullable: true })\n    inn: string;\n\n    // Contact Information\n    @Column({ type: 'varchar', length: 255, nullable: true })\n    email: string;\n\n    @Column({ type: 'varchar', length: 20, nullable: true })\n    phone: string;\n\n    @Column({ type: 'varchar', length: 20, nullable: true })\n    secondaryPhone: string;\n\n    // Address\n    @Column({ type: 'text', nullable: true })\n    address: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    city: string;\n\n    @Column({ type: 'varchar', length: 100, nullable: true })\n    region: string;\n\n    @Column({ name: 'postal_code', type: 'varchar', length: 10, nullable: true })\n    postalCode: string;\n\n    @Column({ type: 'varchar', length: 2, default: 'UA' })\n    country: string;\n\n    // Client Status\n    @Column({\n        type: 'varchar',\n        default: 'active'\n    })\n    status: ClientStatus;\n\n    @Column({ type: 'varchar', length: 20, nullable: true })\n    source: string; // Where did the client come from?\n\n    @Column({ name: 'assigned_user_id', type: 'uuid', nullable: true })\n    assignedUserId: string;\n\n    // Additional Information\n    @Column({ name: 'passport_number', type: 'varchar', length: 20, nullable: true })\n    passportNumber: string;\n\n    @Column({ name: 'passport_date', type: 'date', nullable: true })\n    passportDate: Date;\n\n    @Column({ type: 'text', nullable: true })\n    notes: string;\n\n    // Metadata for flexible fields\n    @Column({ type: 'json' })\n    metadata: Record<string, any>;\n\n    // Soft Delete\n    @DeleteDateColumn({ name: 'deleted_at', type: 'datetime' })\n    deletedAt: Date;\n\n    // Timestamps\n    @CreateDateColumn({ name: 'created_at', type: 'datetime' })\n    createdAt: Date;\n\n    @UpdateDateColumn({ name: 'updated_at', type: 'datetime' })\n    updatedAt: Date;\n\n    @Column({ name: 'created_by', type: 'uuid', nullable: true })\n    createdBy: string;\n\n    @Column({ name: 'updated_by', type: 'uuid', nullable: true })\n    updatedBy: string;\n\n    // Relations\n    @ManyToOne(() => User)\n    @JoinColumn({ name: 'assigned_user_id' })\n    assignedUser: User;\n\n    @OneToMany(() => Case, (caseEntity) => caseEntity.client)\n    cases: Case[];\n}\n"],"names":["Client","name","type","length","nullable","default","User","Case","caseEntity","client"],"mappings":";;;;+BAqBaA;;;eAAAA;;;yBArByI;4BAEjI;4BACA;;;;;;;;;;AAkBd,IAAA,AAAMA,SAAN,MAAMA;AA8Gb;;;;;;;QA1GcC,MAAM;QAAaC,MAAM;;;;;;QAK/BA,MAAM;;;;;;QAKAA,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCF,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCF,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAIxCH,MAAM;QAAgBC,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAG9DH,MAAM;QAAUC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAGvDH,MAAM;QAAOC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAIpDF,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCF,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAGvCF,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAIvCF,MAAM;QAAQE,UAAU;;;;;;QAGxBF,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCF,MAAM;QAAWC,QAAQ;QAAKC,UAAU;;;;;;QAGxCH,MAAM;QAAeC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAG5DF,MAAM;QAAWC,QAAQ;QAAGE,SAAS;;;;;;QAK3CH,MAAM;QACNG,SAAS;;;;;;QAIHH,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAGvCH,MAAM;QAAoBC,MAAM;QAAQE,UAAU;;;;;;QAIlDH,MAAM;QAAmBC,MAAM;QAAWC,QAAQ;QAAIC,UAAU;;;;;;QAGhEH,MAAM;QAAiBC,MAAM;QAAQE,UAAU;;;;;;QAG/CF,MAAM;QAAQE,UAAU;;;;;;QAIxBF,MAAM;;;;;;QAIID,MAAM;QAAcC,MAAM;;;;;;QAI1BD,MAAM;QAAcC,MAAM;;;;;;QAG1BD,MAAM;QAAcC,MAAM;;;;;;QAGpCD,MAAM;QAAcC,MAAM;QAAQE,UAAU;;;;;;QAG5CH,MAAM;QAAcC,MAAM;QAAQE,UAAU;;;;;gCAIrCE,gBAAI;;QACPL,MAAM;;;;;gCAGHM,gBAAI,GAAGC,aAAeA,WAAWC,MAAM;;;;;;QAhH3B;;;QACH;;;QACF;;;QACA;QAAa"}