{"version":3,"sources":["../../../src/file-storage/interfaces/file-storage.interfaces.ts"],"sourcesContent":["/**\n * File storage interfaces and types\n */\n\n/**\n * Storage provider type\n */\nexport type StorageProviderType = 's3' | 'local';\n\n/**\n * File upload options\n */\nexport interface FileUploadOptions {\n    /**\n     * File path (with tenant and optional subdirectories)\n     * Example: 'tenants/{tenantId}/documents/{caseId}/'\n     */\n    path: string;\n\n    /**\n     * File name\n     */\n    fileName: string;\n\n    /**\n     * Content type (MIME type)\n     */\n    contentType: string;\n\n    /**\n     * File data buffer\n     */\n    buffer: Buffer;\n\n    /**\n     * Metadata to attach to the file\n     */\n    metadata?: Record<string, string>;\n\n    /**\n     * Whether to make the file public (default: false)\n     */\n    isPublic?: boolean;\n}\n\n/**\n * File upload result\n */\nexport interface FileUploadResult {\n    /**\n     * Storage path of the file\n     */\n    path: string;\n\n    /**\n     * Public URL (if applicable)\n     */\n    url: string;\n\n    /**\n     * File size in bytes\n     */\n    size: number;\n\n    /**\n     * ETag or checksum\n     */\n    etag?: string;\n\n    /**\n     * Version ID (for versioned storage)\n     */\n    versionId?: string;\n}\n\n/**\n * File download options\n */\nexport interface FileDownloadOptions {\n    /**\n     * File path\n     */\n    path: string;\n\n    /**\n     * Range header for partial downloads\n     */\n    range?: string;\n}\n\n/**\n * File download result\n */\nexport interface FileDownloadResult {\n    /**\n     * File data buffer\n     */\n    buffer: Buffer;\n\n    /**\n     * Content type\n     */\n    contentType: string;\n\n    /**\n     * Content length\n     */\n    contentLength: number;\n\n    /**\n     * Last modified date\n     */\n    lastModified?: Date;\n\n    /**\n     * ETag\n     */\n    etag?: string;\n}\n\n/**\n * Signed URL options\n */\nexport interface SignedUrlOptions {\n    /**\n     * File path\n     */\n    path: string;\n\n    /**\n     * Expiration time in seconds (default: 3600 = 1 hour)\n     */\n    expiresIn?: number;\n\n    /**\n     * Response content disposition\n     */\n    disposition?: 'attachment' | 'inline';\n\n    /**\n     * Content type override\n     */\n    contentType?: string;\n}\n\n/**\n * File metadata\n */\nexport interface FileMetadata {\n    /**\n     * File name\n     */\n    fileName: string;\n\n    /**\n     * Content type\n     */\n    contentType: string;\n\n    /**\n     * File size in bytes\n     */\n    size: number;\n\n    /**\n     * Last modified date\n     */\n    lastModified: Date;\n\n    /**\n     * Custom metadata\n     */\n    metadata?: Record<string, string>;\n\n    /**\n     * Public URL (if applicable)\n     */\n    url?: string;\n}\n\n/**\n * Storage quota information\n */\nexport interface StorageQuota {\n    /**\n     * Total quota in bytes\n     */\n    total: number;\n\n    /**\n     * Used space in bytes\n     */\n    used: number;\n\n    /**\n     * Available space in bytes\n     */\n    available: number;\n\n    /**\n     * Usage percentage (0-100)\n     */\n    usagePercentage: number;\n}\n\n/**\n * File version information\n */\nexport interface FileVersion {\n    /**\n     * Version ID\n     */\n    versionId: string;\n\n    /**\n     * Storage path\n     */\n    path: string;\n\n    /**\n     * File size\n     */\n    size: number;\n\n    /**\n     * Last modified date\n     */\n    lastModified: Date;\n\n    /**\n     * Whether this is the latest version\n     */\n    isLatest: boolean;\n}\n\n/**\n * Storage provider interface\n */\nexport interface IStorageProvider {\n    /**\n     * Upload a file\n     */\n    upload(options: FileUploadOptions): Promise<FileUploadResult>;\n\n    /**\n     * Download a file\n     */\n    download(options: FileDownloadOptions): Promise<FileDownloadResult>;\n\n    /**\n     * Delete a file\n     */\n    delete(path: string): Promise<void>;\n\n    /**\n     * Check if a file exists\n     */\n    exists(path: string): Promise<boolean>;\n\n    /**\n     * Get file metadata\n     */\n    getMetadata(path: string): Promise<FileMetadata>;\n\n    /**\n     * Generate a signed URL for temporary access\n     */\n    generateSignedUrl(options: SignedUrlOptions): Promise<string>;\n\n    /**\n     * List all versions of a file\n     */\n    listVersions(path: string): Promise<FileVersion[]>;\n\n    /**\n     * Copy a file\n     */\n    copy(sourcePath: string, destinationPath: string): Promise<FileUploadResult>;\n\n    /**\n     * Move a file\n     */\n    move(sourcePath: string, destinationPath: string): Promise<FileUploadResult>;\n\n    /**\n     * Delete multiple files\n     */\n    deleteMultiple(paths: string[]): Promise<void>;\n\n    /**\n     * Get storage usage for a tenant\n     */\n    getStorageUsage(prefix: string): Promise<number>;\n}\n"],"names":[],"mappings":"AAAA;;CAEC,GAED;;CAEC"}